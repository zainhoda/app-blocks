<html>
<head>
<script src="https://www.celljs.org/cell.js"></script>
<script src="https://selecttransform.github.io/st.js/st.js"></script>
<link href="jason/jason.css" rel="stylesheet">
<script src="jason/jason.js"></script>
<script src="app-blocks.js"></script>
<style>
body {
  margin: 0;
}

.flex {
        display: flex;
}

#elm {
        width: calc(100vw - 400px);
}
</style>

</head>
<body>
        <div class="flex">
                <div id="elm"></div>
                <div id="jason"></div>
        </div>
        <script>

        // Initialize Jason
        var jason = Jason({
          $cell: true,
          id: "jason",
          style: {
            width: "400px",
            margin: "0 auto"
          }
        }, {
          "$jason": {
            "head": {
              "title": "Loading..."
            }
          }
        });

        // Initialize Elm
        var node = document.getElementById('elm');
        var app = Elm.Main.embed(node);

        // When elm signals that the Jason code has changed, trigger an
        // update
        app.ports.newJason.subscribe(function(newJason) {
                if (document.querySelector("#jason")) {
                        document.querySelector("#jason")._update(JSON.parse(newJason));
                }
        });

        </script>

</body>
</html>
